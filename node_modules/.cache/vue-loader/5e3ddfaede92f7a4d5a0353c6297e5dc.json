{"remainingRequest":"/Volumes/MAC1/javaproject/Sober-web1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/MAC1/javaproject/Sober-web1/src/views/generator/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/MAC1/javaproject/Sober-web1/src/views/generator/index.vue","mtime":1619011782545},{"path":"/Volumes/MAC1/javaproject/Sober-web1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/MAC1/javaproject/Sober-web1/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/MAC1/javaproject/Sober-web1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/MAC1/javaproject/Sober-web1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport { generator, sync } from '@/api/generator/generator'\nimport { downloadFile } from '@/utils/index'\nimport CRUD, { presenter, header } from '@crud/crud'\nimport rrOperation from '@crud/RR.operation'\nimport crudOperation from '@crud/CRUD.operation'\nimport pagination from '@crud/Pagination'\n\nexport default {\n  name: 'GeneratorIndex',\n  components: { pagination, crudOperation, rrOperation },\n  cruds() {\n    return CRUD({ url: 'api/generator/tables' })\n  },\n  mixins: [presenter(), header()],\n  data() {\n    return {\n      syncLoading: false\n    }\n  },\n  created() {\n    this.crud.optShow = { add: false, edit: false, del: false, download: false }\n  },\n  methods: {\n    toGen(tableName) {\n      // 生成代码\n      generator(tableName, 0).then(data => {\n        this.$notify({\n          title: '生成成功',\n          type: 'success',\n          duration: 2500\n        })\n      })\n    },\n    toDownload(tableName) {\n      // 打包下载\n      generator(tableName, 2).then(data => {\n        downloadFile(data, tableName, 'zip')\n      })\n    },\n    sync() {\n      const tables = []\n      this.crud.selections.forEach(val => {\n        tables.push(val.tableName)\n      })\n      this.syncLoading = true\n      sync(tables).then(() => {\n        this.crud.refresh()\n        this.crud.notify('同步成功', CRUD.NOTIFICATION_TYPE.SUCCESS)\n        this.syncLoading = false\n      }).then(() => {\n        this.syncLoading = false\n      })\n    }\n  }\n}\n",null]}